let godsApp,basketApp;Vue.component("tag-open",{props:["nameTag"],template:'<section v-on:click="$emit(\'click-tag\')">\n\t\t\t<div class="label">\n\t\t\t<h2>{{ nameTag }}</h2>\n\t\t\t</div>\n\t\t</section>'}),Vue.component("item-gods",{props:["img","name","price"],data(){return{style:{background:"url("+this.img+")","background-repeat":"no-repeat","background-size":"100% 100%"}}},computed:{amount:function(){return void 0!=app.basket.basketItems[this.basketItemIndex]?app.basket.basketItems[this.basketItemIndex].amount:0},basketItemIndex:function(){if(app.basket.basketItems.length>0)for(let t=0;t<app.basket.basketItems.length;t++)if(this.name==app.basket.basketItems[t].name)return t;return null}},methods:{amountAdd:function(){0==this.amount&&app.basket.basketItems.push({name:this.name,amount:0,price:this.price}),app.basket.basketItems[this.basketItemIndex].amount++,app.basket.basketSumm+=Number(this.price)},amountMinus:function(){if(this.amount>0&&(app.basket.basketItems[this.basketItemIndex].amount--,app.basket.basketSumm-=Number(this.price),0==this.amount)){const t=[];for(let e=0;e<app.basket.basketItems.length;e++)e!=this.basketItemIndex&&t.push(app.basket.basketItems[e]);app.basket.basketItems=t}}},template:'<section class="item-goods" >\n\t\t<div v-bind:style="style" class="item-bg">\n\t\t\t<div class="label">\n\t\t\t\t<h2 class="name-item"> {{ name }}</h2>\n\t\t\t\t<p class="price-item">$ {{ price }} </p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="amount">\n\t\t\t<p>amount</p>\n\t\t\t<img class="minus-item" src="minus.png" v-on:click="amountMinus()"/>\n\t\t\t<p class="number-item">{{ amount }}</p>\n\t\t\t<img class="add-item" src="addItem.png" v-on:click="amountAdd()"/>\n\t\t</div>\n\t</section>'}),Vue.component("shop-list-item",{props:["name","price"],data(){return{}},computed:{amount:function(){return void 0!=app.basket.basketItems[this.basketItemIndex]?app.basket.basketItems[this.basketItemIndex].amount:0},basketItemIndex:function(){if(app.basket.basketItems.length>0)for(let t=0;t<app.basket.basketItems.length;t++)if(this.name==app.basket.basketItems[t].name)return t;return null},summPrice:function(){return this.amount*this.price}},methods:{amountAdd:function(){app.basket.basketItems[this.basketItemIndex].amount++,app.basket.basketSumm+=Number(this.price)},amountMinus:function(){if(this.amount>0&&(app.basket.basketItems[this.basketItemIndex].amount--,app.basket.basketSumm-=Number(this.price),0==this.amount)){const t=[];for(let e=0;e<app.basket.basketItems.length;e++)e!=this.basketItemIndex&&t.push(app.basket.basketItems[e]);app.basket.basketItems=t,this.$el.innerHTML="",0==app.basket.basketItems.length?(this.$el.outerHTML='<tr style="height: 0px;"></tr>',this.$destroy()):(this.$el.outerHTML="",this.$destroy())}}},template:'<tr><td class="name-goods-shop-list"><p>{{name}}</p></td>\n\t<td class="amount-shop-list">\n\t<img class="minus-item" src="minus.png" v-on:click="amountMinus()"/>\n\t<p class="number-item">{{amount}}</p>\n\t<img class="add-item" src="addItem.png" v-on:click="amountAdd()"/>\n\t</td>\n\t<td class="price-shop-list"><p>$ {{summPrice}}</p></td></tr>'}),window.onunload=function(t){app.$destroy()};const app=new Vue({el:"#app",data:{basket:{basketSumm:0,basketItems:[]},basketOpen:!1,tagOpen:!1,tagName:"",gods:{}},beforeDestroy:function(){console.log(this),document.cookie="basket_cookie = "+JSON.stringify(this.basket)+"; max-age=604800",console.log(document.cookie)},mounted:function(){const t=document.cookie.split(";");for(let e=0;e<t.length;e++){const s=t[e].split("=");"basket_cookie"==s[0]&&0!=s[1].basketSumm&&(this.basket=JSON.parse(s[1]))}},methods:{clickTag:function(t){this.tagName=t,this.tagOpen=!0,axios.get("./Gods/gods.json").then((function(e){app.gods=e.data[t].items})).catch((function(t){console.log(t)})).finally((function(){let e="";for(const t of app.gods)e+='<item-gods img="'+t.img+'" name="'+t.name+'" price="'+t.price+'" ></item-gods>\n';godsApp=new Vue({parent:app,el:"#godsApp",data(){return{}},computed:{tagName:function(){return t},basketOpen:function(){return app.basketOpen},tagOpen:function(){return app.tagOpen}},template:'<article v-show="tagOpen && !basketOpen" id="godsApp" class="open-goods" >\n\t\t\t\t\t\t<section class="goods">'+e+"</section>\n\t\t\t\t\t\t</article>"})}))},clickBasket:function(){this.tagName="Your Cart",this.basketOpen=!0;let t="";if(this.basket.basketItems.length>0)for(const e of this.basket.basketItems)t+='<shop-list-item name="'+e.name+'" price="'+e.price+'" ></shop-list-item>';else t='<tr style="height: 0px;"></tr>';basketApp=new Vue({parent:app,el:"#basketApp",data(){return{}},computed:{basket:function(){return app.basket},basketOpen:function(){return app.basketOpen}},methods:{clearAll:function(){app.basket.basketItems=[],app.basket.basketSumm=0;for(let t=this.$children.length-1;t>0;t--)this.$children[t].$el.innerHTML="",this.$children[t].$el.outerHTML="",this.$children[t].$destroy();this.$children[0].$el.innerHTML="",this.$children[0].$el.outerHTML='<tr style="height: 0px;"></tr>',this.$children[0].$destroy()},buy:function(){alert("Thanks for your purchase\n Summ: $"+this.basket.basketSumm)},closeTag:function(){app.closeTag()}},template:'<article  v-show="basketOpen" id="basketApp" class="open-goods" v-bind:class="{\'open-shop\': basketOpen}">\n\t\t\t\t<section class="goods">\n\t\t\t\t\t<section class="item-goods">\n\t\t\t\t\t\t<table class="shop-list">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr><td class="name-goods-shop-list">Shop List</td><td class="amount-shop-list">Amount</td><td class="price-shop-list">Price</td></tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t'+t+'\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr><td><button class="clear-all" v-on:click="clearAll()">Clear All</button></td><td>Summ $ {{basket.basketSumm}}</td></tr>\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<div class="button-block">\n\t\t\t\t\t\t\t<button class="clear-all" v-on:click="closeTag()"><p>Continue shopping</p></button>\n\t\t\t\t\t\t\t<button class="clear-all" v-on:click="buy()"><p>Buy</p></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</article>'})},closeTag:function(){this.basketOpen?(this.basketOpen=!1,this.tagName=godsApp.tagName):this.tagOpen&&(this.tagOpen=!1)}}});